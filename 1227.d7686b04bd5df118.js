"use strict";(self.webpackChunkintswap_frontend=self.webpackChunkintswap_frontend||[]).push([[1227],{11227:(mt,C,r)=>{r.r(C),r.d(C,{LpStakingPoolsModule:()=>gt});var u=r(88692),x=r(7976),y=r(8239),p=r(2024),M=r(92673),w=r(54121),P=r(42147),f=r(27969),m=r(61528),U=r(84967),L=r(15696),A=r(66393),S=r(84945),I=r(62686),b=r(91095),t=r(64537),N=r(19376),B=r(96195),J=r(65707),O=r(83331),Z=r(50132),k=r(13288),T=r(9638);function Q(o,i){if(1&o&&(t.TgZ(0,"div",7)(1,"h3",8),t._uU(2,"Supported Innovative Reward Strategies"),t.qZA(),t.TgZ(3,"a",9),t._uU(4),t.qZA()()),2&o){const n=t.oxw().$implicit;t.xp6(3),t.Q6J("href",n.link,t.LSH),t.xp6(1),t.Oqu(n.content)}}function Y(o,i){1&o&&t.YNc(0,Q,5,2,"ng-template",6)}function F(o,i){1&o&&(t.TgZ(0,"mat-icon",22),t._uU(1," south"),t.qZA())}function z(o,i){1&o&&(t.TgZ(0,"mat-icon",22),t._uU(1," north"),t.qZA())}function D(o,i){if(1&o&&(t.ynx(0),t.YNc(1,F,2,0,"mat-icon",21),t.YNc(2,z,2,0,"mat-icon",21),t.BQk()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",-1==n.sortBy.sortDirection),t.xp6(1),t.Q6J("ngIf",1==n.sortBy.sortDirection)}}function R(o,i){1&o&&(t.TgZ(0,"mat-icon",22),t._uU(1," south"),t.qZA())}function j(o,i){1&o&&(t.TgZ(0,"mat-icon",22),t._uU(1," north"),t.qZA())}function q(o,i){if(1&o&&(t.ynx(0),t.YNc(1,R,2,0,"mat-icon",21),t.YNc(2,j,2,0,"mat-icon",21),t.BQk()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",-1==n.sortBy.sortDirection),t.xp6(1),t.Q6J("ngIf",1==n.sortBy.sortDirection)}}function H(o,i){1&o&&(t.TgZ(0,"div",23),t._uU(1,"loading..."),t.qZA())}function V(o,i){1&o&&(t.TgZ(0,"div",23),t._uU(1,"No Data."),t.qZA())}const E=function(){return["/app/airdrop"]};function G(o,i){1&o&&(t.ynx(0),t.TgZ(1,"mat-icon",34),t._uU(2," local_fire_department"),t.qZA(),t.TgZ(3,"mat-icon",35),t._uU(4," whatshot"),t.qZA(),t.TgZ(5,"button",36),t._uU(6,"Free Mint"),t.qZA(),t.BQk()),2&o&&(t.xp6(5),t.Q6J("routerLink",t.DdM(1,E)))}function W(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-icon",33),t._uU(2," whatshot"),t.qZA(),t.YNc(3,G,7,2,"ng-container",15),t.BQk()),2&o){const n=t.oxw().$implicit,e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.isAirdropPair(n.pair.address))}}function K(o,i){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const n=i.ngIf;t.xp6(1),t.AsE(" ",n.name," : ",t.xi3(2,2,n.apy,"1.2-8")," % ")}}function X(o,i){1&o&&t._uU(0," loading Item ... ")}function tt(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,K,3,5,"div",38),t.ALo(2,"async"),t.YNc(3,X,1,0,"ng-template",null,40,t.W1O),t.qZA()),2&o){const n=i.$implicit,e=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n))("ngIfElse",e)}}function nt(o,i){if(1&o&&(t.ynx(0),t.YNc(1,tt,5,4,"div",4),t.BQk()),2&o){const n=i.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function ot(o,i){1&o&&t._uU(0," loading ")}function et(o,i){if(1&o&&(t.TgZ(0,"div",37),t.YNc(1,nt,2,1,"ng-container",38),t.ALo(2,"async"),t.YNc(3,ot,1,0,"ng-template",null,39,t.W1O),t.qZA()),2&o){const n=t.MAs(4),e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.strategyApys$))("ngIfElse",n)}}const it=function(o){return["/","app","lp-staking-pool",o]},at=function(o){return{background:o}};function rt(o,i){if(1&o&&(t.TgZ(0,"div",24)(1,"div",25)(2,"div",26),t._UZ(3,"img",27)(4,"img",28),t.qZA(),t._uU(5),t.YNc(6,W,4,1,"ng-container",15),t.qZA(),t.TgZ(7,"div",29),t._uU(8),t.ALo(9,"number"),t.ALo(10,"async"),t.qZA(),t.TgZ(11,"div",30),t._uU(12),t.ALo(13,"number"),t.ALo(14,"async"),t.TgZ(15,"mat-icon",31),t._uU(16,"help "),t.qZA()(),t.TgZ(17,"div",17),t._uU(18),t.qZA(),t.TgZ(19,"div",18),t._uU(20),t.ALo(21,"async"),t.qZA(),t.YNc(22,et,5,4,"ng-template",null,32,t.W1O),t.qZA()),2&o){const n=i.$implicit,e=t.MAs(23),c=t.oxw(2);t.Q6J("routerLink",t.VKq(24,it,n.pairAddress))("ngStyle",t.VKq(26,at,c.isFarmPair(n.pair.address)?"rgba(255, 241, 169, 0.1)":"none")),t.xp6(3),t.Q6J("src",c.getTokenIcon(n.pair.collection.address),t.LSH),t.xp6(1),t.Q6J("src",c.getTokenIcon(n.pair.token.address),t.LSH),t.xp6(1),t.hij(" ",n.pairName," "),t.xp6(1),t.Q6J("ngIf",c.isFarmPair(n.pair.address)),t.xp6(2),t.hij("$ ",t.xi3(9,12,n.tvl||t.lcZ(10,15,n.tvl$)||0,"1.2-8"),""),t.xp6(4),t.hij("",t.xi3(13,17,n.totalApy||t.lcZ(14,20,n.totalApy$)||0,"1.2-8")," % "),t.xp6(3),t.Q6J("nzPopoverArrowPointAtCenter",!0)("nzPopoverContent",e),t.xp6(3),t.hij("",n.stakedRatio," %"),t.xp6(2),t.hij("$ ",t.lcZ(21,22,n.userStaked$),"")}}function lt(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),t._uU(4,"NAME"),t.qZA(),t.TgZ(5,"div",14),t.NdJ("click",function(){const s=t.CHM(n).ngIf,l=t.oxw();return t.KtG(l.changeSortDirection("tvl",s.sortBy))}),t._uU(6,"TVL "),t.YNc(7,D,3,2,"ng-container",15),t.qZA(),t.TgZ(8,"div",16),t.NdJ("click",function(){const s=t.CHM(n).ngIf,l=t.oxw();return t.KtG(l.changeSortDirection("apy",s.sortBy))}),t._uU(9,"Total APY "),t.YNc(10,q,3,2,"ng-container",15),t.qZA(),t.TgZ(11,"div",17),t._uU(12,"Total Staked Ratio"),t.qZA(),t.TgZ(13,"div",18),t._uU(14,"Your Staked"),t.qZA()(),t.YNc(15,H,2,0,"div",19),t.YNc(16,V,2,0,"div",19),t.YNc(17,rt,24,28,"div",20),t.qZA()()}if(2&o){const n=i.ngIf;t.xp6(7),t.Q6J("ngIf",n.sortBy&&"tvl"==n.sortBy.sortBy),t.xp6(3),t.Q6J("ngIf",n.sortBy&&"apy"==n.sortBy.sortBy),t.xp6(5),t.Q6J("ngIf",!n.lpStakingPoolList),t.xp6(1),t.Q6J("ngIf",!!n.lpStakingPoolList&&0==n.lpStakingPoolList.length),t.xp6(1),t.Q6J("ngForOf",n.lpStakingPoolList)}}const ct=function(){return{delay:3e3,disableOnInteraction:!1}},pt=function(o,i){return{lpStakingPoolList:o,sortBy:i}};b.ZP.use([b.tl,b.pt]);const st=[{path:"",component:(()=>{class o{constructor(n,e,c){var s=this;this.cacheService=n,this.web3Service=e,this.chainInfoService=c,this.strategyBannerList=[{content:"Fixed Reward Rate Strategy",link:"https://docs.intswap.io/getting-started-with-intswap/lp-mining"},{content:"Royalty Distribution Strategy",link:"https://docs.intswap.io/getting-started-with-intswap/lp-mining"},{content:"NFT Buying Incentive Strategy",link:"https://docs.intswap.io/getting-started-with-intswap/lp-mining"}],this.sortBy$=new w.X({sortBy:"tvl",sortDirection:-1}),this.showOnlyUserStaked$=new w.X(!1),this.lpStakingPoolList$=this.cacheService.pairList$.pipe((0,P.x)((l,a)=>JSON.stringify(l)===JSON.stringify(a)),(0,f.U)(l=>l.map(a=>{const d=p.O$.from(a.lpStakingPool.totalStakingAmount).mul(p.O$.from("10000")).div(p.O$.from(a.liquidity)).toNumber()/100,_=this.cacheService.ethPrice$.pipe((0,f.U)(g=>(p.O$.from(g).mul(p.O$.from(a.tvl)).mul(p.O$.from(parseInt(100*d+""))).div(p.O$.from("10").pow(26)).toNumber()/1e4).toString())),v=_.pipe((0,m.w)(function(){var g=(0,y.Z)(function*(h){return yield s.getApy0fStrategies(a,h)});return function(h){return g.apply(this,arguments)}}())),ft=v.pipe((0,m.w)(g=>(0,U.D)(g))).pipe((0,f.U)(g=>this.sumApy(g)),(0,P.x)((g,h)=>g==h)),$=a.lpStakingPool.userStaking.length>0&&p.O$.from(a.lpStakingPool.userStaking[0].amount).gt(p.O$.from("0"));return{pairAddress:a.address,pairName:a.collection.symbol+" - "+a.token.symbol,pair:a,totalApy$:ft,stakedRatio:d,tvl$:_,strategyApys$:v,isUserStaked:$,userStaked$:_.pipe((0,f.U)(g=>$?(Number(g)*p.O$.from(a.lpStakingPool.userStaking[0].amount).mul(p.O$.from("10000")).div(p.O$.from(a.lpStakingPool.totalStakingAmount)).toNumber()/1e4).toFixed(4).toString():"0"))}}))),this.filterLpStakingPoolList$=this.showOnlyUserStaked$.pipe((0,m.w)(l=>this.lpStakingPoolList$.pipe((0,f.U)(a=>a.filter(d=>!l||d.isUserStaked))))),this.sortLpStakingPoolList$=this.filterLpStakingPoolList$.pipe((0,m.w)(l=>this.sortList(l)))}ngOnInit(){}sortList(n){if(n){const e=n.map(c=>c.totalApy$.pipe((0,f.U)(s=>({...c,totalApy:s}))).pipe((0,m.w)(s=>s.tvl$.pipe((0,f.U)(l=>({...s,tvl:l}))))));return this.sortBy$.pipe((0,m.w)(({sortBy:c,sortDirection:s})=>{switch(c){case"apy":return(0,L.a)(e).pipe((0,f.U)(l=>l.sort((a,d)=>s*(a.totalApy-d.totalApy))));case"tvl":return(0,L.a)(e).pipe((0,f.U)(l=>l.sort((a,d)=>s*(parseFloat(a.tvl)>parseFloat(d.tvl)?1:-1))))}}))}return(0,A.D)([])}sumApy(n){let e=0;for(let c=0;c<n.length;c++)e+=n[c].apy;return e}changeSortDirection(n,e){e&&this.sortBy$.next({sortBy:n,sortDirection:n==e.sortBy?-1*e.sortDirection:-1})}getGlobalStrategies(n){return this.cacheService.getGlobalStrategies(n)}getApy0fStrategies(n,e){var c=this;return(0,y.Z)(function*(){return e=0<Number(e)&&Number(e)<1?"1":Math.floor(Number(e)).toString(),[...yield c.getGlobalStrategies(c.chainInfoService.getChainConfig().contractAddressMap[n.factory].IntswapV1StakingCenter),...n.lpStakingPool.incentiveStrategyList].map(s=>{if(s.status){const l=c.getStrategyRewardRate(n.address,s.address);return l&&p.O$.from(e).gt(p.O$.from(0))?l.pipe((0,f.U)(a=>({name:s.name,apy:p.O$.from(a.value).mul(p.O$.from("10000")).div(p.O$.from(10).pow(a.decimals)).div(p.O$.from(e)).toNumber()/100})),(0,P.x)((a,d)=>a==d)):(l&&p.O$.from(e).eq(p.O$.from(0)),(0,S.of)({name:s.name,apy:0}))}return(0,S.of)({name:s.name,apy:0})})})()}getStrategyRewardRate(n,e){var c=this;return(0,A.D)(this.web3Service.invokeContract("IIntswapV1IncentiveStrategy","estimatedOneYearRewards",[n],e)).pipe((0,m.w)(function(){var s=(0,y.Z)(function*(l){const a=l[0];if(a==I.je)return{value:"0",decimals:18};const d=l[1],_=(0,M.parseUnits)(yield c.cacheService.fetchRewardTokenPrice(a),"4"),v=(yield c.web3Service.getTokenDecimals(a).catch(()=>({0:18})))[0];return{value:p.O$.from(d).mul(_).div(p.O$.from("10000")).toString(),decimals:v}});return function(l){return s.apply(this,arguments)}}()))}isFarmPair(n){return["0x1b1f2751a1f12b98b521ce8697179669e2bd94ad","0xd6c22cecb1384df830d32eec83042567ae396d05","0xa9b7094596d79281e615ec1da7fb1d0aa523b0ec","0xa204a32adb1e5692f6857b9898c3f8d6859ec471","0xc31a8f4fbf52234ae134f3e8af32503665a9e72a","0xdfc2d2c3a56436594dd0f0eb1e7d1cf21b4214da","0xf5b68338cd01aa60aa93cbedaf7cf0266ca0aff2","0xcd61a42f8c61cd4cf5eb51be43a896f199905991","0xceea8dc7d63fb58a65ffbdfe507de8f9ecc3446f","0xffb65029bd2aafc16490e9ed0dbe08c5553c7b54","0xac7c4f7ee35a3831feb3ced515197d264bcbd00e","0xba551d89ee137c4076c798a212f09006f629904d","0x4b4db2fc50868866a53692e9140d5e76b06f19bf","0x3d545b6b1afae748072b9a4ecaf59d9149f49843"].map(e=>e.toLowerCase()).includes(n.toLowerCase())}isAirdropPair(n){return["0x1b1f2751a1f12b98b521ce8697179669e2bd94ad","0xd6c22cecb1384df830d32eec83042567ae396d05","0xa9b7094596d79281e615ec1da7fb1d0aa523b0ec","0xa204a32adb1e5692f6857b9898c3f8d6859ec471","0xcd61a42f8c61cd4cf5eb51be43a896f199905991","0xceea8dc7d63fb58a65ffbdfe507de8f9ecc3446f","0xffb65029bd2aafc16490e9ed0dbe08c5553c7b54","0xac7c4f7ee35a3831feb3ced515197d264bcbd00e"].map(e=>e.toLowerCase()).includes(n.toLowerCase())}getTokenIcon(n){return this.cacheService.getTokenIcon(n)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(N.Q),t.Y36(B.U),t.Y36(J.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-lp-staking-pools"]],decls:10,vars:15,consts:[[2,"margin","1rem auto","width","80vw","display","grid","grid-template-columns","1fr 1fr","padding","1rem","column-gap","2rem"],[2,"font-size","3rem","font-weight","bolder","grid-column-start","span 2"],[2,"justify-self","center","align-self","center","font-size","1rem","line-height","1.5","padding-right","3rem"],["direction","vertical",2,"width","35vw","height","15vh","justify-self","center","align-items","center",3,"loop","autoplay","pagination","slidesPerView","spaceBetween"],[4,"ngFor","ngForOf"],["class","lp-pools-wrapper",4,"ngIf"],["swiperSlide","","data-swiper-autoplay","8000"],[1,"strategy-banner-item"],[2,"margin-bottom","1rem"],["target","_blank",2,"font-size","2rem","font-weight","bolder","text-decoration","underline",3,"href"],[1,"lp-pools-wrapper"],[1,"lp-pools-list"],[1,"lp-pool-header"],[1,"lp-pool-name"],[1,"lp-pool-tvl",2,"cursor","pointer",3,"click"],[4,"ngIf"],[1,"lp-pool-total-apy",2,"cursor","pointer",3,"click"],[1,"lp-pool-staked-ratio"],[1,"lp-pool-user-staked"],["class","lp-pool-loading",4,"ngIf"],["class","lp-pool-item",3,"routerLink","ngStyle",4,"ngFor","ngForOf"],["color","primary",4,"ngIf"],["color","primary"],[1,"lp-pool-loading"],[1,"lp-pool-item",3,"routerLink","ngStyle"],[1,"lp-pool-name",2,"justify-content","start","padding-left","2rem"],[2,"margin-right","12px"],[2,"z-index","3","width","28px","height","28px","border-radius","50%","margin","0 -6px","position","relative",3,"src"],[2,"z-index","2","width","28px","height","28px","border-radius","50%","margin","0 -6px","position","relative",3,"src"],[1,"lp-pool-tvl"],[1,"lp-pool-total-apy"],["color","primary","nz-popover","","nzPopoverPlacement","rightTop",3,"nzPopoverArrowPointAtCenter","nzPopoverContent"],["apyDetail",""],[2,"color","gold","animation","changeColor 0.8s infinite linear","margin-left","1rem"],[2,"color","gold","animation","changeColor 0.6s infinite linear"],[2,"color","gold","animation","changeColor 0.7s infinite linear"],["mat-stroked-button","","color","warn",1,"mint-btn",3,"routerLink"],[2,"min-height","10vh","min-width","15vw"],[4,"ngIf","ngIfElse"],["loading",""],["loadingItem",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"NFT LP Mining"),t.qZA(),t.TgZ(3,"p",2),t._uU(4,"Provide liquidity for your favorite NFT Pool in Intswap, and get corresponding rewards according to various reward strategies. Put forward your new ideas in the community, we will give rich rewards."),t.qZA(),t.TgZ(5,"swiper",3),t.YNc(6,Y,1,0,null,4),t.qZA()(),t.YNc(7,lt,18,5,"div",5),t.ALo(8,"async"),t.ALo(9,"async")),2&n&&(t.xp6(5),t.Q6J("loop",!1)("autoplay",t.DdM(11,ct))("pagination",!0)("slidesPerView",1)("spaceBetween",0),t.xp6(1),t.Q6J("ngForOf",e.strategyBannerList),t.xp6(1),t.Q6J("ngIf",t.WLB(12,pt,t.lcZ(8,7,e.sortLpStakingPoolList$),t.lcZ(9,9,e.sortBy$))))},dependencies:[u.sg,u.O5,u.PC,x.rH,O.Hw,Z.lU,k.nF,k.YC,T.lW,u.Ov,u.JJ],styles:[".lp-pools-wrapper[_ngcontent-%COMP%]{width:80vw;min-height:40vh;border-radius:16px;background:rgba(35,1,33,.3);border:3px solid rgba(97,84,94,.3098039216);-webkit-backdrop-filter:blur(12px) brightness(1.5);backdrop-filter:blur(12px) brightness(1.5);margin:1rem auto;padding:12px}.lp-pools-list[_ngcontent-%COMP%]{width:100%}.lp-pool-loading[_ngcontent-%COMP%]{width:100%;margin-bottom:4px;height:40px;display:flex;align-items:center;justify-content:center}.lp-pool-header[_ngcontent-%COMP%], .lp-pool-item[_ngcontent-%COMP%]{width:100%;margin-bottom:4px;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;font-weight:700;padding:.5rem 0}.lp-pool-header[_ngcontent-%COMP%]   .lp-pool-name[_ngcontent-%COMP%], .lp-pool-header[_ngcontent-%COMP%]   .lp-pool-total-apy[_ngcontent-%COMP%], .lp-pool-header[_ngcontent-%COMP%]   .lp-pool-staked-ratio[_ngcontent-%COMP%], .lp-pool-header[_ngcontent-%COMP%]   .lp-pool-user-staked[_ngcontent-%COMP%], .lp-pool-header[_ngcontent-%COMP%]   .lp-pool-tvl[_ngcontent-%COMP%], .lp-pool-item[_ngcontent-%COMP%]   .lp-pool-name[_ngcontent-%COMP%], .lp-pool-item[_ngcontent-%COMP%]   .lp-pool-total-apy[_ngcontent-%COMP%], .lp-pool-item[_ngcontent-%COMP%]   .lp-pool-staked-ratio[_ngcontent-%COMP%], .lp-pool-item[_ngcontent-%COMP%]   .lp-pool-user-staked[_ngcontent-%COMP%], .lp-pool-item[_ngcontent-%COMP%]   .lp-pool-tvl[_ngcontent-%COMP%]{padding:0 12px;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.lp-pool-name[_ngcontent-%COMP%]{min-width:30vw}.lp-pool-header[_ngcontent-%COMP%]{font-weight:bolder;height:48px;font-size:18px;border-radius:4px}.lp-pool-item[_ngcontent-%COMP%]{border-radius:4px;border:1px solid rgba(255,216,237,.4);cursor:pointer}.lp-pool-item[_ngcontent-%COMP%]:hover{background:rgba(255,213,168,.2)}.lp-pool-item[_ngcontent-%COMP%]   .lp-pool-total-apy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:12px;height:18px;width:18px;font-size:18px;cursor:pointer}.strategy-banner-item[_ngcontent-%COMP%]{width:35vw;height:15vh;border-radius:1rem;border:2px solid rgba(255,154,231,.3098039216);display:flex;flex-direction:column;justify-content:center;align-items:center}.mint-btn[_ngcontent-%COMP%]{border:1px solid #ff96f8;margin-left:2rem;transition:all .2s}.mint-btn[_ngcontent-%COMP%]:hover{color:#fff;background:#ff7ff6}@keyframes changeColor{0%{color:#ff7300}25%{color:#ff8400;transform:rotate(5deg)}50%{color:red}75%{color:#ff0095;transform:rotate(-5deg)}to{color:#ff7300}}"]}),o})()}];let dt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.Bz.forChild(st),x.Bz]}),o})(),gt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,dt,O.Ps,Z.$6,k.kz,T.ot]}),o})()}}]);